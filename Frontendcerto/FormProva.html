<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EducaSC</title>
    <style>
        body{text-align: center;
             background-image: url('Fundo.jpg');
             background-size: cover;
             background-position: center;
            }
        h2{margin-top: 50px
        }

        div{background-color: azure;
            border-radius: 15px;
            margin: auto;
            margin-top: 5%;
            width: 40%;
            height: 35%;
            font-family: monospace;
            font-size:large;
            padding-bottom: 20px;
        }

        h1{
            background-color:  rgb(38, 109, 103);
            color: white;
            border-radius: 25px;
            padding: 5%;
        }

        h3{
            margin-bottom: 2px
        }

        .b{ width: 30%;
             height: 40px;
             background-color: rgb(38, 109, 103);
             border-radius: 15px;
             color: white}

        
    </style>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
        const botao = document.getElementById('botao');
        const messageDiv = document.getElementById('message');
        let endpoint;

        botao.addEventListener('click', (event) => {
            event.preventDefault(); // Previne o comportamento padrão do formulário

            const titulo = document.getElementById('titulo').value;
            const formato = document.getElementById('formato').value;
            const cabecalho = document.querySelector('input[name="cabecalho"]:checked').value;
            const informacoes = document.getElementById('informacoes').value;
            const assunto = document.getElementById('assunto').value;
            const explicacao = document.getElementById('explicacao').value;
            const referencia = document.querySelector('input[name="referencia"]:checked').value;
            const apresentacao = document.querySelector('input[name="apresentacao"]:checked').value;
            const detalhes = document.getElementById('detap').value;
            const dataentrega = document.getElementById('dataentrega').value;
            const dataap = document.getElementById('dataap').value;
            const turma = document.getElementById('turma').value;

            const data = {
                tipo: formato,
                cab: cabecalho,
                infocab: informacoes,
                titulo: titulo,
                assunto: assunto,
                explicacao: explicacao,
                referencia: referencia,
                ap: apresentacao,
                detap: detalhes,
                dataentrega: dataentrega,
                dataap: dataap,
                turma: turma
            }
            console.log(data)

            fetch('http://localhost:3000/api/trabalho', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })

            .then(response => {
                    if (response.ok) {
                        return response.json();
                    }
                    throw new Error('Erro ao cadastrar o trabalho');
                })
                .then(data => {
                    console.log('Trabalho cadastrado com sucesso:', data);
                    // Limpar os campos de entrada após o envio
                    document.getElementById('titulo').value = '';
                    document.getElementById('formato').value = '';
                    document.getElementById('informacoes').value = '';
                    document.getElementById('assunto').value = '';
                    document.getElementById('explicacao').value = '';
                    document.getElementById('detap').value = '';
                    document.getElementById('dataentrega').value = '';
                    document.getElementById('dataap').value = '';
                    document.getElementById('turma').value = ''
                })
                .catch(error => {
                    console.error('Erro:', error);
                });
        });
    });

    </script>
</head>

<body>
    <div class="div">
    <h1>Postar nova prova: </h1>
    
        <h3 class="l">Tipo da prova:</h3><p></p>
        <input id="tipo" type="text" placeholder="Oral, prática, etc."><p></p>

        <h3 class="l">Os alunos poderão consultar materiais de pesquisa:</h3><p></p>
        <input type="radio" name="consulta" id="Sim" value="Sim">
        <label class="m">Sim<label><p></p>
        <input type="radio" name="consulta" id="Não" value="Não">
        <label class="m">Não</label><p></p>

        <h3 class="l">Os alunos poderão usar ferramentas durante a prova:</h3><p></p>
        <input type="radio" name="ferramentas" id="sim" value="Sim">
        <label class="m">Sim<label><p></p>
        <input type="radio" name="ferramentas" id="nao" value="Não">
        <label class="m">Não</label><p></p>

        <h3 class="l">Se sim, quais:</h3><p></p>
        <input id="quaisfer" type="text" placeholder="Calculadora, dicionário, etc."><p></p>

        <h3 style="margin-bottom: 2px">Explicação e detalhes sobre a prova:</h3>
        <textarea required="" id="assunto" placeholder="Especificações de todos os assuntos a serem abordados na prova e outros detalhes." rows="15" cols="55"></textarea><p></p>

        <h3 class="l">Tempo para a realização da prova:</h3><p></p>
        <input id="tempo" type="text"><p></p>

        <h3 class="l">Data da prova:</h3><p></p>
        <input id="data" type="date" placeholder="(Caso tenha)"><p></p>

        <h3 class="l">Para quais turmas é a prova:</h3><p></p>
        <input id="turma" placeholder="Ex: 1°1, 2°1, 3°1, etc."><p></p>

        <button  class="b" id="botao">Enviar</button>